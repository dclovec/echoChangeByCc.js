!function(t,e){var o={initNew:e};"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof exports?module.exports=function(){return o}:t.echoChangeByCc=o}(window,function(t){"use strict";function e(t){t=t||{};var e=t.offset||0,n=t.offsetVertical||e,f=t.offsetHorizontal||e,s=function(t,e){return parseInt(t||e,10)};u=t.container||document.body,d=u!==document.body?u:window,o={t:s(t.offsetTop,n),b:s(t.offsetBottom,n),l:s(t.offsetLeft,f),r:s(t.offsetRight,f)},r=s(t.throttle,250),c=t.debounce!==!1,a=!!t.unload,l=t.callback||l,i.render(),document.addEventListener?(d.addEventListener("scroll",h,!1),d.addEventListener("load",h,!1)):(d.attachEvent("onscroll",h),d.attachEvent("onload",h))}var o,n,r,c,a,u,d,i={},l=function(){},f=function(t){return null===t.offsetParent},s=function(t,e){if(f(t))return!1;var o=t.getBoundingClientRect();return o.right>=e.l&&o.bottom>=e.t&&o.left<=e.r&&o.top<=e.b},h=function(){(c||!n)&&(clearTimeout(n),n=setTimeout(function(){i.render(),n=null},r))};return i.render=function(){for(var t,e,n=document.querySelectorAll("img[data-echo], [data-echo-background]"),r=n.length,c={l:0-o.l,t:0-o.t,b:u.clientHeight+o.b,r:u.clientWidth+o.r},d=0;r>d;d++)e=n[d],s(e,c)?(a&&e.setAttribute("data-echo-placeholder",e.src),null!==e.getAttribute("data-echo-background")?e.style.backgroundImage="url("+e.getAttribute("data-echo-background")+")":e.src=e.getAttribute("data-echo"),a||(e.removeAttribute("data-echo"),e.removeAttribute("data-echo-background")),l(e,"load")):a&&(t=e.getAttribute("data-echo-placeholder"))&&(null!==e.getAttribute("data-echo-background")?e.style.backgroundImage="url("+t+")":e.src=t,e.removeAttribute("data-echo-placeholder"),l(e,"unload"));r||i.detach()},i.detach=function(){document.removeEventListener?d.removeEventListener("scroll",h):d.detachEvent("onscroll",h),clearTimeout(n)},e(t),i});